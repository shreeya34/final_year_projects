{% extends "layouts/base.html" %}

{% block title %} Categories {% endblock %} 

<!-- Specific Page CSS goes HERE  -->
{% block stylesheets %}{% endblock stylesheets %}

{% block content %}


<div class="row">
    <div class="col-lg-12 text-center mt-5 mb-3">
        <h4 class="card-title">Categories</h4>
          <div class="card-body d-flex align-items-center justify-content-center" id="categoryContentBox">
              <!-- Content for the category box -->
          </div>
      </div>
  </div>

  <style>
      .aggregate-radio-item {
          margin-bottom: 10px;

      }

      .aggregate-radio-item input {
          margin-right: 10px;

      }
  </style>

<script>
  function fetchAnnualSalesData(asin) {
      const asinData = fetch(`/getAsinData?asin=${asin}`)
          .then(response => response.json())
          .then(asinData => {
              console.log(asinData);

              let asinContentBox = document.getElementById("categoryContentBox");

              // Extracting unique ASINs from jsonData using Set
              let uniqueAsinSet = new Set();
              let asinHtml = "<ul>";

              for (let i = 0; i < asinData.length; i++) {
                  const currentAsin = asinData[i].asin;
                  const category = asinData[i].category;

                  // Check if the ASIN is not in the set, then add it to the HTML
                  if (!uniqueAsinSet.has(category)) {
                      asinHtml += `<li class="asin-checkbox-item"><input type="checkbox" id="asinCheckbox${i}" name="selectedAsin" value="${category}"><label for="selectedAsin${i}">${category}</label></li>`;

                      // Add the ASIN to the set to mark it as added
                      uniqueAsinSet.add(category);
                  }
              }

              asinHtml += "</ul>";

              // Set the content of the categoryContentBox
              categoryContentBox.innerHTML = asinHtml;
          })
          .catch(error => {
              console.error('Error fetching or processing data:', error);
          });
  }

  // Example usage
  fetchAnnualSalesData('asin_parameter');



</script>
{% endblock content %}

<!-- Specific Page JS goes HERE  -->
{% block javascripts %}{% endblock javascripts %}
